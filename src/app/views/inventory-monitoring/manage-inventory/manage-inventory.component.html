<c-row>
  <c-col xs>
    <c-card class="mb-4">

      <!-- Header -->
      <c-card-header class="mb-4 d-flex justify-content-between">
        <div>Manage Inventory</div>

        <div>
          <button (click)="toggleLiveDemoVan()" cButton color="primary" class="me-2" size="sm">Manage Van</button>   
          <button (click)="openAddItemModal()" cButton color="primary" size="sm">Add Item</button>          
        </div>
        
      </c-card-header>


      <!-- item start model -->
      <c-modal size="xl" id="liveDemoModal" [visible]="visibleItem" (visibleChange)="handleLiveDemoChangeItem($event)">
        <c-modal-header>
          <h5 cModalTitle>
            {{ isEditMode ? 'Edit Inventory Item Details' : (isViewClicked ? 'View Inventory Item Details' : 'Add New Inventory Item') }}
          </h5>
          <button (click)="toggleLiveDemoItem()" cButtonClose></button>
        </c-modal-header>

        <c-modal-body>
          <form cForm [formGroup]="itemForm">
            <c-row>

              <!-- Left Side -->
              <c-col [md]="7">

                <c-row>
                  <c-col [md]="12" class="mb-3">
                    <div cFormFloating>
                      <input cFormControl formControlName="itemName" id="itemName" type="text" placeholder="Enter..." />
                      <label cLabel for="itemName">Enter Item Name</label> 
                      
                      <!-- Validation message -->
                      <div *ngIf="itemForm.get('itemName')?.invalid && itemForm.get('itemName')?.touched" class="text-danger">
                        <small>Item name is required</small>
                      </div>

                    </div>   
                  </c-col>
                
                  <c-col [md]="6">
                    <div cFormFloating>
                      <select cSelect formControlName="categoryId" (change)="onCategoryChange($event)">
                        <option value="" disabled>Open this select category</option>
                        <option *ngFor="let category of categoriesArray" [value]="category._id" [selected]="category._id === itemForm.get('categoryId')?.value">
                          {{ category.categoryName }}
                        </option>
                      </select>
                      <label cLabel>Select Inventory Category</label>
                    </div>  
                    
                    <!-- Validation message -->
                    <div *ngIf="itemForm.get('categoryId')?.invalid && itemForm.get('categoryId')?.touched" class="text-danger">
                      <small>Category is required</small>
                    </div>

                  </c-col>

                  <c-col [md]="6">                    
                    <div cFormFloating>
                      <input cFormControl formControlName="partNumber" id="partNumber" type="text" placeholder="Enter..." maxlength="10" oninput="this.value = this.value.replace(/[^0-9]/g, '')" />
                      <label cLabel for="partNumber">Part Number</label> 
                      
                      <!-- Validation message -->
                      <div *ngIf="itemForm.get('partNumber')?.invalid && itemForm.get('partNumber')?.touched" class="text-danger">
                        <small>
                          *required field only numbers allowed
                        </small>
                      </div>

                    </div> 
                  </c-col>
                </c-row>

                <c-row class="my-3">               

                  <c-col [md]="3">                    
                    <div cFormFloating>
                      <input cFormControl formControlName="maxQty" id="maxQty" type="text" placeholder="Enter..." maxlength="10" oninput="this.value = this.value.replace(/[^0-9]/g, '')" />
                      <label cLabel for="maxQty">Max Qty</label>  
                      
                      <!-- Validation message -->
                      <div *ngIf="itemForm.get('maxQty')?.invalid && itemForm.get('maxQty')?.touched" class="text-danger">
                        <small>*required field Only number allowed</small>
                      </div>

                    </div> 
                  </c-col>

                  <c-col [md]="3">                    
                    <div cFormFloating>
                      <input cFormControl formControlName="minQty" id="minQty" type="text" placeholder="Enter..." maxlength="10" oninput="this.value = this.value.replace(/[^0-9]/g, '')"  />
                      <label cLabel for="minQty">Min Qty</label>  
                      
                      <!-- Validation message -->
                      <div *ngIf="itemForm.get('minQty')?.invalid && itemForm.get('minQty')?.touched" class="text-danger">
                        <small>*required field Only number allowed</small>
                      </div>

                    </div> 
                  </c-col>

                  <c-col [md]="3">                    
                    <div cFormFloating>
                      <input cFormControl formControlName="inStock" id="inStock" type="text" placeholder="Enter..." maxlength="10" oninput="this.value = this.value.replace(/[^0-9]/g, '')" />
                      <label cLabel for="inStock">In Stock</label>   
                      
                      <!-- Validation message -->
                      <div *ngIf="itemForm.get('inStock')?.invalid && itemForm.get('inStock')?.touched" class="text-danger">
                        <small>*required field Only number allowed</small>
                      </div>

                    </div> 
                  </c-col>

                  <c-col [md]="3">                    
                    <div cFormFloating>
                      <input cFormControl formControlName="amtOrder" id="amtOrder" type="text" placeholder="Enter..." maxlength="10" oninput="this.value = this.value.replace(/[^0-9]/g, '')"  />
                      <label cLabel for="amtOrder">Amt to Order</label>  
                      
                      <!-- Validation message -->
                      <div *ngIf="itemForm.get('amtOrder')?.invalid && itemForm.get('amtOrder')?.touched" class="text-danger">
                        <small>*required field Only number allowed</small>
                      </div>

                    </div> 
                  </c-col>

                </c-row>

                <!-- <c-row>
                   <c-col [md]="5">
                    <div cFormFloating>
                      <select cSelect formControlName="vanId" (change)="onVanChange($event)">
                        <option value="" disabled>Open this select van</option>
                        <option *ngFor="let van of vanArray" [value]="van._id" [selected]="van._id === itemForm.get('vanId')?.value">
                          {{ van.vanName }}
                        </option>
                      </select>
                      <label cLabel>Select Van</label>
                    </div>      
                    
                    <div *ngIf="itemForm.get('vanId')?.invalid && itemForm.get('vanId')?.touched" class="text-danger">
                      <small>Van is required</small>
                    </div>

                  </c-col> 
                </c-row> -->

                <c-row class="my-3">  

                  <c-col [md]="3">
                    <div cFormFloating>
                      <input cFormControl formControlName="cost" id="cost" type="text" placeholder="Enter..." maxlength="10" oninput="this.value = this.value.replace(/[^0-9]/g, '')" />
                      <label cLabel for="cost">Enter Cost</label>  

                      <!-- Validation message -->
                      <div *ngIf="itemForm.get('cost')?.invalid && itemForm.get('cost')?.touched" class="text-danger">
                        <small>*required field Only number allowed</small>
                      </div>                       
                      
                    </div>
                  </c-col>

                  <c-col [md]="3">
                    <div cFormFloating> 
                      <input cFormControl formControlName="price" id="price" type="text" placeholder="Enter..." maxlength="10" oninput="this.value = this.value.replace(/[^0-9]/g, '')" />
                      <label cLabel for="price">Enter Price</label>
                      
                      <!-- Validation message -->
                      <div *ngIf="itemForm.get('price')?.invalid && itemForm.get('price')?.touched" class="text-danger">
                        <small>*required field Only number allowed</small>
                      </div>

                    </div>    
                  </c-col>

                  <c-col [md]="3" class="mt-3">
                    <c-form-check>
                      <input cFormCheckInput formControlName="forWarehouse" id="forWarehouse" type="checkbox" />
                      <label cFormCheckLabel for="forWarehouse">For Warehouse</label>

                      <!-- Validation message -->
                      <div *ngIf="itemForm.get('forWarehouse')?.invalid && itemForm.get('forWarehouse')?.touched" class="text-danger">
                        <small>You must check this box</small>
                      </div>

                    </c-form-check>
                  </c-col>

                  <c-col [md]="3" class="mt-3">
                    <c-form-check>
                      <input cFormCheckInput formControlName="addOrder" id="addOrder" type="checkbox" />
                      <label cFormCheckLabel for="addOrder">Add to Order</label>

                      <!-- Validation message -->
                      <div *ngIf="itemForm.get('addOrder')?.invalid && itemForm.get('addOrder')?.touched" class="text-danger">
                        <small>You must check this box</small>
                      </div>

                    </c-form-check>
                  </c-col>

                </c-row>

                <c-row> 
                  <c-col>
                    <div cFormFloating>
                      <textarea cFormControl formControlName="comment" id="comment" type="text" placeholder="Enter..." maxlength="80" style="height: 200px;"></textarea>
                      <label cLabel for="comment">Enter your comment.....</label>   
                      
                      <!-- Validation message -->
                      <div *ngIf="itemForm.get('comment')?.invalid && itemForm.get('comment')?.touched" class="text-danger">
                        <small>Comment is required</small>
                      </div>

                       <!-- Live counter -->
                       <div class="text-muted small">
                        {{ itemForm.get('comment')?.value?.length || 0 }}/80
                      </div>

                    </div>    
                  </c-col>
                </c-row>

              </c-col>

              <!-- Right Side -->
              <c-col [md]="5">

                <c-row class="mb-3">
                  <c-col>
                    <div cFormFloating>
                      <textarea cFormControl formControlName="shortDes" id="shortDes" type="text" placeholder="Enter..." maxlength="60" style="height: 100px;"></textarea>
                      <label cLabel for="shortDes">Enter Short Description</label>  
                      
                      <!-- Validation messages -->
                      <div *ngIf="itemForm.get('shortDes')?.invalid && itemForm.get('shortDes')?.touched" class="text-danger">
                        <small *ngIf="itemForm.get('shortDes')?.errors?.['required']">
                          Short description is required
                        </small>
                        <small *ngIf="itemForm.get('shortDes')?.errors?.['maxlength']">
                          Maximum 60 characters allowed
                        </small>
                      </div>

                       <!-- Live counter -->
                       <div class="text-muted small">
                        {{ itemForm.get('shortDes')?.value?.length || 0 }}/60
                      </div>

                    </div>
                  </c-col>
                </c-row>
                
                <c-row class="mb-3">
                  <c-col>
                    <div cFormFloating>
                      <textarea cFormControl formControlName="partDes" id="partDes" type="text" placeholder="Enter..." maxlength="50" style="height: 130px;"></textarea>
                      <label cLabel for="partDes">Enter Part Description</label>  
                      
                      <!-- Validation messages -->
                      <div *ngIf="itemForm.get('partDes')?.invalid && itemForm.get('partDes')?.touched" class="text-danger">
                        <small *ngIf="itemForm.get('partDes')?.errors?.['required']">
                          Part description is required
                        </small>
                        <small *ngIf="itemForm.get('partDes')?.errors?.['maxlength']">
                          Maximum 50 characters allowed
                        </small>
                      </div>

                      <!-- Live counter -->
                      <div class="text-muted small">
                        {{ itemForm.get('partDes')?.value?.length || 0 }}/50
                      </div>

                    </div>
                  </c-col>
                </c-row>
                
                <c-row>
                  <c-col [md]="4">
                    <div class="mt-3"><strong>Add Images:</strong></div>
                  </c-col>

                  <c-col [md]="8">
                    <div cFormFloating>
                      <input cFormControl (change)="onFileChanged($event, 'Images')" id="Images" type="file" placeholder="Add Image" multiple />
                      <label cLabel for="Images">Add Image (max 9 Images)</label>

                      <!-- Validation message -->
                      <div *ngIf="itemForm.get('Images')?.invalid && itemForm.get('Images')?.touched" class="text-danger">
                        <small>Please upload at least one valid image (JPG/PNG, max 2MB each, max 9 files)</small>
                      </div>                      

                    </div>
                  </c-col>
                </c-row>

                <c-row class="my-3">
                  <c-col [md]="4">
                    <div class="mt-3"><strong>Add PDF:</strong></div>
                  </c-col>

                  <c-col [md]="8">
                    <div cFormFloating>
                      <input cFormControl (change)="onFileChanged($event, 'pdfs')" id="pdfs" type="file" placeholder="Add PDF" multiple />
                      <label cLabel for="pdfs">Add PDF (max 9 PDF)</label>

                      <!-- Validation message -->
                      <div *ngIf="itemForm.get('pdfs')?.invalid && itemForm.get('pdfs')?.touched" class="text-danger">
                        <small>Please upload at least one valid PDF (PDF max 2MB each, max 9 files)</small>
                      </div>

                    </div>
                  </c-col>
                </c-row>

                <c-row>
                  <c-col [md]="4">
                    <div class="mt-3"><strong>Add Video:</strong></div>
                  </c-col>

                  <c-col [md]="8">
                    <div cFormFloating>
                      <input cFormControl (change)="onFileChanged($event, 'videos')" id="videos" type="file" placeholder="Add Videos" multiple />
                      <label cLabel for="videos">Add Videos (max 9 Videos)</label>

                       <!-- Validation message -->
                       <div *ngIf="itemForm.get('videos')?.invalid && itemForm.get('videos')?.touched" class="text-danger">
                        <small>Please upload at least one valid Video (Video max 5MB each ,max 9 files)</small>
                      </div>

                    </div>
                  </c-col>
                </c-row>

              </c-col>

            </c-row>
          </form>
        </c-modal-body>

        <c-modal-footer>
          <button (click)="toggleLiveDemoItem()" cButton color="secondary" size="sm">Close</button>
          <button (click)="submitItem()" *ngIf="showSaveChanges" cButton [disabled]="itemForm.invalid" color="success" size="sm">Save Item</button>
        </c-modal-footer>
      </c-modal>
      <!-- item end model -->


      <!-- van start model -->
      <c-modal id="liveDemoModal" [visible]="visibleVan" (visibleChange)="handleLiveDemoChangeVan($event)">
        
        <c-modal-header>
          <h5 cModalTitle>Add New Van</h5>
          <button (click)="toggleLiveDemoVan()" cButtonClose></button>
        </c-modal-header>

        <c-modal-body>          
          <form cForm [formGroup]="vanForm">

            <c-col>
              <label cLabel for="vanName">Enter Van Name</label>
              <input cFormControl formControlName="vanName" id="vanName" type="text" placeholder="Enter van name, e.g., Van1"/>
            </c-col>

          </form>
        </c-modal-body>

        <c-modal-footer>
          <button (click)="toggleLiveDemoVan()" cButton color="secondary" size="sm">Close</button>
          <button (click)="onAddVanClick()" [disabled]="vanForm.invalid" cButton color="success" size="sm">Add Van</button>
        </c-modal-footer>
      </c-modal>
      <!-- van end model -->


      <!-- notification start model -->
      <c-modal #withPopoverModal alignment="center" id="withPopoverModal">
        <c-modal-header>
          <h5 cModalTitle>Notifications</h5>
          <button [cModalToggle]="withPopoverModal.id" cButtonClose></button>
        </c-modal-header>
        <c-modal-body>
          <c-card class="mb-1">
            <c-card-body>In et eros vitae lectus tempor volutpat.</c-card-body>
          </c-card>
          <c-card class="mb-1">
            <c-card-body>In et eros vitae lectus tempor volutpat.</c-card-body>
          </c-card>
          <c-card class="mb-1">
            <c-card-body>In et eros vitae lectus tempor volutpat.</c-card-body>
          </c-card>
          <c-card class="mb-1">
            <c-card-body>In et eros vitae lectus tempor volutpat.</c-card-body>
          </c-card>
          <c-card class="mb-1">
            <c-card-body>In et eros vitae lectus tempor volutpat.</c-card-body>
          </c-card>
          <c-card class="mb-1">
            <c-card-body>In et eros vitae lectus tempor volutpat.</c-card-body>
          </c-card>
        </c-modal-body>
        <c-modal-footer>
          <button [cModalToggle]="withPopoverModal.id" cButton color="secondary">
            Close
          </button>
          <button cButton color="primary">Understood</button>
        </c-modal-footer>
      </c-modal>
      <!-- notification end model -->
      

      <!-- Toggle Tabs -->
      <c-nav variant="tabs">
        <a [active]="true" [cTabContent]="tabContent" [routerLink] [tabPaneIdx]="0" cNavLink>Warehouse</a>
        <a [cTabContent]="tabContent" [routerLink] [tabPaneIdx]="1" cNavLink>Vans</a>
      </c-nav>


      <!-- Toggle Nav Bar -->
      <c-navbar colorScheme="light">
        <c-container class="mt-2">
          <div class="d-flex align-items-center ">

            <!-- Search Box -->
            <input aria-label="Search" cFormControl class="me-2" placeholder="Search" type="search" [(ngModel)]="searchText">

            <!-- Category Dropdown -->
            <c-dropdown class="ms-3">
              <select id="categorySelect" aria-label="Default select example" cSelect (change)="onCategorySelect($event)" class="rounded-pill mx-2">
                <option value="all" selected>All Categories</option>
                <option *ngIf="categoriesArray.length === 0" style="color: #ff6666;">No Categories</option>
                <option *ngFor="let category of categoriesArray" [value]="category._id">{{ category.categoryName }}</option>
              </select>
            </c-dropdown>

          </div>

          <div class="d-flex align-items-center">

            <!-- Notifications -->
            <!-- <button [cModalToggle]="withPopoverModal.id" shape="rounded-pill" size="sm" cButton color="primary" class="position-relative mx-2">
              Notifications
              <c-badge color="danger" position="top-end" shape="rounded-pill">99+</c-badge>
              <span class="visually-hidden">unread messages</span>
            </button> -->

            <!-- Export -->
            <c-dropdown class="ms-3">
              <button size="sm" shape="rounded-pill" cButton cDropdownToggle color="primary" class="py-1 px-3">Export</button>
              <ul cDropdownMenu dark>
                <li><button cDropdownItem>PDF</button></li>
                <li><button cDropdownItem>Excel</button></li>
                <li><button cDropdownItem>Something else here</button></li>
              </ul>
            </c-dropdown>
          </div>

        </c-container>
      </c-navbar>


      <!-- Body Section -->
      <c-tab-content #tabContent="cTabContent">

        <!-- for warehouse -->
        <c-tab-pane class="p-3">
          <c-card-body>            
            <table [hover]="true" [responsive]="true" [striped]="true" align="middle" cTable class="mb-0 border">
              
              <thead cTableColor="light">
                <tr>
                  <th></th>
                  <th>SNo.</th>
                  <th>Name</th>
                  <th>Category name</th>
                  <th>Min Qty</th>
                  <th>Stock</th>
                  <th>Max Qty</th>               
                  <th>Quantity To Order</th>
                  <!-- <th>Ord Status</th> -->
                  <th>Transfer</th>
                  <th>Action</th>
                </tr>
              </thead>

              <tbody>

                <!-- There are items in the warehouse -->
                <ng-container *ngIf="itemArray && itemArray.length > 0; else noWarehouseData">

                  <!-- Filtered & Displayed Items -->
                  <tr *ngFor="let warehouse of itemArray | filter:searchText; let i = index">

                    <td>
                      <input cFormCheckInput id="nolabelCheck" (click)="getItemById(warehouse._id)" name="nolabelCheck" type="checkbox" />                      
                    </td>

                    <td>{{ i + 1 }}</td>
                    <td>{{ warehouse.itemName }}</td>
                    <td>{{ warehouse.categoryId?.categoryName || 'N/A' }}</td>                 
                    <td>{{ warehouse.minQty }}</td> 
                    <td>{{ warehouse.inStock }}</td>
                    <td>{{ warehouse.maxQty }}</td> 

                    <!-- Order section -->
                    <td>
                      <form [formGroup]="orderForm" class="d-flex">
                        <c-input-group sizing="sm" style="width: 50% !important;">
                          <input aria-describedby="button-addon2" aria-label="Recipient's username" cFormControl  type="number" formControlName="requestedQuantity" placeholder="Add Quantity" />
                          <button cButton color="danger" id="button-addon2" type="button" variant="outline" (click)="addToOrder(warehouse._id)">Order</button>
                        </c-input-group>

                        <button *ngIf="latestOrderStatuses[warehouse._id] === 'pending'" cButton size="sm" class="ms-1" color="warning" variant="outline">{{ latestOrderStatuses[warehouse._id]}}</button>
                      </form>
                    </td>

                    <!-- Transfer -->
                    <td>
                      <button (click)="toggleLiveDemo2(warehouse._id)" cButton color="warning" size="sm" shape="rounded-pill" >Transfer</button>

                      <!-- transfer start model -->
                      <c-modal id="liveDemoModal{{warehouse._id}}" [visible]="visible2[warehouse._id]" (visibleChange)="handleLiveDemoChange2($event, warehouse._id)">
                        <c-modal-header>
                          <h5 cModalTitle>Item From Warehouse</h5>
                          <button (click)="toggleLiveDemo2(warehouse._id)" cButtonClose size="sm"></button>
                        </c-modal-header>
                        <c-modal-body>
                          <c-row>

                            <c-col [md]="4">
                              <input cFormControl id="" type="text" [value]="warehouse.itemName" disabled />
                            </c-col>

                            <c-col [md]="4">
                              <input cFormControl id="transferQuantity" type="number" [(ngModel)]="transferQuantity" placeholder="Qty" />
                            </c-col>

                            <c-col [md]="4">
                              <div>
                                <select cSelect id="vanSelect" [(ngModel)]="selectedVanId">
                                  <option disabled selected>Select a van</option>
                                  <option *ngFor="let van of vanArray" [value]="van._id">{{ van.vanName }}</option>
                                </select>
                              </div>
                            </c-col>

                          </c-row>
                        </c-modal-body>
                        <c-modal-footer class="py-1">
                          <button (click)="toggleLiveDemo2(warehouse._id)" cButton color="secondary" size="sm">Cancel</button>
                          <button (click)="transferItemInventory(warehouse._id, warehouse.inStock, warehouse.minQty)" cButton color="primary" size="sm">Transfer</button>

                        </c-modal-footer>
                      </c-modal>
                      <!-- transfer end model -->

                    </td>
                    
                    <td>
                      <!-- Edit Button -->
                      <button (click)="getItemById(warehouse._id)" (click)="toggleLiveDemoItem()" class="me-1">
                        <svg cIcon name="cil-pencil" size="sm"></svg>
                      </button>

                      <!-- Delete Button -->
                      <button (click)="deleteItem(warehouse._id)">
                        <svg cIcon name="cil-trash" size="sm"></svg>
                      </button>
                    </td>
                    
                  </tr>

                </ng-container>

                 <!-- No items exist -->
                <ng-template #noWarehouseData>
                  <tr>
                    <td colspan="12" class="text-center text-muted">
                      No Item Available
                    </td>
                  </tr>
                </ng-template>


              </tbody>

              <tfoot>
                <tr>
                  <td class="px-3" colspan="12">
                    <div class="d-flex justify-content-between align-items-center">
              
                      <!-- Pagination Section -->
                      <div class="mt-3">
                        <c-pagination aria-label="Page navigation example" class="mb-0">
              
                          <!-- Previous Button -->
                          <li cPageItem [class.disabled]="currentPage === 1">
                            <a class="py-2" cPageLink style="cursor:pointer;" (click)="changePage(currentPage - 1)">Previous</a>
                          </li>
              
                          <!-- Dynamic Page Numbers -->
                          <li *ngFor="let page of totalPagesArray()" cPageItem [class.active]="currentPage === page">
                            <a class="py-2" cPageLink style="cursor:pointer;" (click)="changePage(page)">{{ page }}</a>
                          </li>
              
                          <!-- Next Button -->
                          <li cPageItem [class.disabled]="currentPage === totalPages">
                            <a class="py-2" cPageLink style="cursor:pointer;" (click)="changePage(currentPage + 1)">Next</a>
                          </li>
              
                        </c-pagination>
                      </div>
              
                      <!-- Total Items Count -->
                      <div class="text-end fw-semibold text-secondary px-3 py-2 bg-body border rounded shadow-sm">
                        Total Items: <span class="text-dark">{{ totalItems }}</span>
                      </div>
              
                    </div>
                  </td>
                </tr>
              </tfoot>
              
            </table>
          </c-card-body>
        </c-tab-pane>

        <!-- for van -->
        <c-tab-pane class="p-3">
          <c-card-body>
            <table [hover]="true" [responsive]="true" [striped]="true" align="middle" cTable class="mb-0 border">
              <thead cTableColor="light">
                <tr>
                  <th></th>
                  <th>SNo.</th>
                  <th>Item name</th>
                  <th>Van name</th>
                  <th>Category name</th>
                  <th>Total Qty On Hand</th>         
                  <th>Transfer</th>
                  <th>Action</th>
                </tr>
              </thead>

              <tbody>
                <tr *ngFor="let van of transfers | filter:searchText; let i = index ">

                  <td>
                    <input cFormCheckInput id="nolabelCheck" (click)="getItemById(van._id)" name="nolabelCheck" type="checkbox" />
                  </td>

                  <td>{{ i + 1 }}</td>
                  <td>{{ van.itemName }}</td>
                  <td>{{ van.vanName }}</td>
                  <td>{{ van.categoryName }}</td>
                  <td>{{ van.qtyTransferred }}</td>

                  <!-- Order Section
                   <td>
                    <form [formGroup]="orderForm">
                      <c-input-group sizing="sm" style="width: 50% !important;">
                        <input aria-describedby="button-addon2" aria-label="Recipient's username" cFormControl type="number" formControlName="requestedQuantity" placeholder="Add Quantity" />
                        <button cButton color="danger" id="button-addon2" type="button" variant="outline" (click)="addToOrder(van._id)">Order</button>
                      </c-input-group>
                    </form>                    
                  </td> -->

                  <!-- Transfer Button -->
                  <td>
                    <button (click)="getItemById(van._id); toggleLiveDemoVan2(van._id)" cButton color="warning" size="sm" shape="rounded-pill">Transfer</button>
                    
                    <!-- Transfer Modal -->
                    <c-modal id="liveDemoModal{{van._id}}" [visible]="visibleVan2[van._id]" (visibleChange)="handleLiveDemoChange2Van2($event, van._id)">
                     
                      <c-modal-header>
                        <h5 cModalTitle>Item From Van</h5>
                        <button (click)="toggleLiveDemoVan2(van._id)" cButtonClose size="sm"></button>
                      </c-modal-header>

                      <c-modal-body>
                        <c-row>
                          <c-col [md]="4">
                            <input cFormControl id="itemName" type="text" [value]="van.itemName" disabled />
                          </c-col>
                  
                          <c-col [md]="4">
                            <input cFormControl id="transferQuantity" type="number" [(ngModel)]="transferQuantity" placeholder="Qty" min="1" />
                          </c-col>
                  
                          <c-col [md]="4">
                            <div>
                              <select cSelect id="vanSelect" [(ngModel)]="selectedVanId">
                                <option disabled selected value="">Select a van</option>
                                <option *ngFor="let v of vanArray" [value]="v._id">{{ v.vanName }}</option>
                              </select>
                            </div>
                          </c-col>
                        </c-row>
                      </c-modal-body>

                      <c-modal-footer class="py-1">
                        <button (click)="toggleLiveDemoVan2(van._id)" cButton color="secondary" size="sm">Cancel</button>
                        <button (click)="transferItemToVan(van._id, van.totalQuantity, van.minimumQuantity)" cButton color="primary" size="sm">Transfer</button>
                      </c-modal-footer>
                    </c-modal>
                    <!-- End Transfer Modal -->
                  </td>

                  <!-- Action Buttons -->
                  <td>
                    <!-- Edit Button -->
                    <!-- <button (click)="getItemById(van._id)" (click)="toggleLiveDemoItem()" (click)="clickAddMember()" class="me-1">
                      <svg cIcon name="cil-pencil" size="sm"></svg>
                    </button> -->

                    <!-- Delete Button -->
                    <button (click)="deleteItem(van._id)">
                      <svg cIcon name="cil-trash" size="sm"></svg>
                    </button>
                  </td>

                </tr>

                <!-- When No Data Available -->
                <tr *ngIf="!transfers || transfers.length === 0">
                  <td colspan="10" class="text-center text-muted">No Data Available For Van</td>
                </tr>

              </tbody>
            </table>
          </c-card-body>

        </c-tab-pane>

      </c-tab-content>

    </c-card>
  </c-col>
</c-row>